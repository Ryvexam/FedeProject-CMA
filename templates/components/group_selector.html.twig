{# components/group_selector.html.twig #}
{% macro group_selector(form_widget) %}
    <div class="space-y-2">
        {{ form_label(form_widget, 'Groups', {'label_attr': {'class': 'block text-sm font-medium text-gray-700 mb-1'}}) }}
        {{ form_widget(form_widget, {
            'attr': {
                'class': 'hidden',
                'id': 'groups-select'
            }
        }) }}
        <div class="flex flex-wrap gap-2" id="custom-group-selector">
            {% for group in form_widget.vars.choices %}
                <button type="button"
                        data-group-id="{{ group.value }}"
                        class="group-pill px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200
                           border-2 border-green-200 bg-white text-gray-700 hover:border-green-500">
                    {{ group.label }}
                    <svg class="hidden ml-2 -mr-1 h-4 w-4 text-green-600 check-icon" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/>
                    </svg>
                </button>
            {% endfor %}
        </div>
        {{ form_errors(form_widget) }}
    </div>
{% endmacro %}